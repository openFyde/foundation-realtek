# Copyright 2024 The Realtek Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

description   "Setting network parameters to improve performance"
author        "edwardwu@realtek.com"

start on started boot-complete

oom score never
task

script
  echo 4194304 > /proc/sys/net/core/rmem_max
  echo 4194304 > /proc/sys/net/core/wmem_max

  setting_network_accelerator() {
    for iface in "$@"; do
      if [ -f /sys/class/net/$iface/queues/rx-0/rps_cpus ]; then
        echo f > /sys/class/net/$iface/queues/rx-0/rps_cpus
      fi
    done
  }
  setting_network_accelerator eth0 wlan0 eth1
end script
