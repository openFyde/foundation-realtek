From ccc1037e60b258b4802e096fe1b2614122fb9c70 Mon Sep 17 00:00:00 2001
From: Charles Lee <charles.lee@realtek.com>
Date: Wed, 19 Jun 2024 09:21:51 +0000
Subject: [PATCH 85/98] fwdbg should use rtk-media-heap

Change-Id: I8a61daf29b54154d540d599cd97219207abb0b52
---
 drivers/soc/realtek/common/rtk_fwdbg.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/soc/realtek/common/rtk_fwdbg.c b/drivers/soc/realtek/common/rtk_fwdbg.c
index df06c994c583..aab099d5252e 100644
--- a/drivers/soc/realtek/common/rtk_fwdbg.c
+++ b/drivers/soc/realtek/common/rtk_fwdbg.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/dma-mapping.h>
 #include <linux/dma-buf.h>
+#include <linux/dma-map-ops.h>
 #include <linux/uaccess.h>
 #include <soc/realtek/rtk_media_heap.h>
 #include <soc/realtek/memory.h>
@@ -350,6 +351,7 @@ static int rtk_fwdbg_probe(struct platform_device *pdev)
 
 	fw_dbg_dev->coherent_dma_mask = DMA_BIT_MASK(32);
 	fw_dbg_dev->dma_mask = (u64 *)&fw_dbg_dev->coherent_dma_mask;
+	set_dma_ops(fw_dbg_dev, &rheap_dma_ops);
 
 	dev_info(&pdev->dev, "probe\n");
 
-- 
2.45.2

