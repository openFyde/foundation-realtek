From 8777be859fec1952ad85a0c237ff156d6d5ca26a Mon Sep 17 00:00:00 2001
From: James Tai <james.tai@realtek.com>
Date: Wed, 14 Aug 2024 14:23:11 +0800
Subject: [PATCH] media: platform: add V4L2 config for Realtek DHC SoCs

Change-Id: I2f81df37a93cf6cdbf0cf188283c9d63803af072
---
 arch/arm64/boot/dts/realtek/rtd16xxb.dtsi | 6 ++++++
 arch/arm64/boot/dts/realtek/kent.dtsi    | 6 ++++++
 arch/arm64/boot/dts/realtek/rtd1920.dtsi | 4 ++++
 drivers/media/platform/Kconfig            |  1 +
 drivers/media/platform/rtk_vcodec/Kconfig | 33 +++++++++++++++++++++++
 5 files changed, 50 insertions(+)

--- a/drivers/media/platform/Kconfig
+++ b/drivers/media/platform/Kconfig
@@ -92,5 +92,6 @@
 source "drivers/media/platform/verisilicon/Kconfig"
 source "drivers/media/platform/via/Kconfig"
 source "drivers/media/platform/xilinx/Kconfig"
+source "drivers/media/platform/rtk_vcodec/Kconfig"
 
 endif # MEDIA_PLATFORM_DRIVERS
--- /dev/null
+++ b/drivers/media/platform/rtk_vcodec/Kconfig
@@ -0,0 +1,33 @@
+# SPDX-License-Identifier: GPL-2.0-only
+
+config RTK_V4L2_VDEC
+bool "Realtek V4L2 Video Decoder Interface"
+	depends on VIDEO_DEV
+	select V4L_MEM2MEM_DRIVERS
+	select V4L2_MEM2MEM_DEV
+	select V4L2_JPEG_HELPER
+	select VIDEOBUF2_DMA_CONTIG
+	select VIDEOBUF2_VMALLOC
+	select MEDIA_CONTROLLER
+	select MEDIA_CONTROLLER_REQUEST_API
+	default n
+	help
+	  Realtek V4L2 Video Decoder Driver Interface
+
+config RTK_V4L2_DEC_PREPEND_METADATA
+bool "Prepend metadata in decoded frame buffer"
+	depends on RTK_V4L2_VDEC
+	default y
+	help
+	  Prepend metadata in front of decoded frame buffer.
+
+config RTK_V4L2_VENC
+bool "Realtek V4L2 Video Encoder Interface"
+	depends on VIDEO_DEV
+	select V4L_MEM2MEM_DRIVERS
+	select V4L2_MEM2MEM_DEV
+	select VIDEOBUF2_DMA_CONTIG
+	select VIDEOBUF2_VMALLOC
+	default n
+	help
+	  Realtek V4L2 Video Encoder Driver Interface
