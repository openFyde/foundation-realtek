From 6aa27ea106492e431235ba5f12c319f659570093 Mon Sep 17 00:00:00 2001
From: James Tai <james.tai@realtek.com>
Date: Thu, 10 Nov 2022 20:31:16 +0800
Subject: [PATCH] net: ethernet: realtek: add r8169soc ethernet driver for
 Realtek DHC SoCs

Change-Id: Ibb5203e995fcfed5b4a9434df308ddbc603b34a2
---
 drivers/net/ethernet/realtek/Kconfig    |    19 +
 drivers/net/ethernet/realtek/Makefile   |     1 +
 drivers/net/ethernet/realtek/r8169soc.c | 11536 ++++++++++++++++++++++
 3 files changed, 11556 insertions(+)
 create mode 100644 drivers/net/ethernet/realtek/r8169soc.c

--- a/drivers/net/ethernet/realtek/Kconfig
+++ b/drivers/net/ethernet/realtek/Kconfig
@@ -113,4 +113,23 @@
 	  To compile this driver as a module, choose M here: the module
 	  will be called r8169.  This is recommended.
 
+config R8169SOC
+	tristate "Realtek STB SoC 8169soc ethernet support"
+	depends on ARCH_REALTEK
+	select CRC32
+	select PHYLIB
+	help
+	  Say Y here if you have a embedded Realtek STB SoC Ethernet interface.
+
+	  To compile this driver as a module, choose M here: the module
+	  will be called r8169soc.  This is recommended.
+config RTL_RX_NO_COPY
+	bool "Support to receive packets without memory copy"
+	default n
+	depends on R8169SOC
+	help
+	  This is a feature of embedded Realtek Ethernet driver.
+	  Say Y here to impove performance and reduce CPU loading.
+	  Say N here to save memory for packet buffers.
+
 endif # NET_VENDOR_REALTEK
--- a/drivers/net/ethernet/realtek/Makefile
+++ b/drivers/net/ethernet/realtek/Makefile
@@ -8,3 +8,5 @@
 obj-$(CONFIG_ATP) += atp.o
 r8169-objs += r8169_main.o r8169_firmware.o r8169_phy_config.o
 obj-$(CONFIG_R8169) += r8169.o
+r8169soc-objs += rtl8169soc.o rtl8169soc_fw_data.o
+obj-$(CONFIG_R8169SOC) += r8169soc.o
